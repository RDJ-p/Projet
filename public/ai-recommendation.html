<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AI Book Recommendation</title>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="csssss.css">
    <style>
        body {
            font-family: 'Cormorant', serif;
            background-color: #f5f5f5;
            padding: 40px;
            text-align: center;
        }
        .recommend-container {
            background: white;
            padding: 30px;
            border-radius: 15px;
            max-width: 500px;
            margin: auto;
            box-shadow: 0 0 15px rgba(0,0,0,0.1);
        }
        .recommend-container h2 {
            margin-bottom: 20px;
        }
        .recommend-container input, .recommend-container select {
            padding: 10px;
            margin: 10px 0;
            width: 100%;
            font-size: 16px;
        }
        .recommend-container button {
            padding: 10px 20px;
            background: #333;
            color: white;
            border: none;
            font-size: 16px;
            cursor: pointer;
            border-radius: 8px;
        }
  .result {
    margin-top: 40px;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    gap: 24px;
    justify-content: center;
    align-items: stretch;
}

.book-card {
    background: #ffffff;
    border-radius: 16px;
    overflow: hidden;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
    display: flex;
    flex-direction: column;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    max-width: 100%;
}

.book-card:hover {
    transform: translateY(-6px);
    box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);
}

.book-card img {
    width: 100%;
    height: 200px;
    object-fit: cover;
    background: #f0f0f0;
}

.book-card-content {
    padding: 18px;
    display: flex;
    flex-direction: column;
    gap: 10px;
    flex-grow: 1;
}

.book-title {
    font-size: 17px;
    font-weight: 600;
    color: #222;
    line-height: 1.3;
}

.book-author {
    font-size: 14px;
    color: #666;
}

.book-category {
    display: inline-block;
    background: #edf2fa;
    color: #3367d6;
    font-size: 12px;
    padding: 4px 10px;
    border-radius: 14px;
    width: fit-content;
    font-weight: 500;
}

.book-price {
    font-size: 16px;
    font-weight: bold;
    color: #1a73e8;
    margin-top: 4px;
}

.book-card a {
    margin-top: auto;
    display: inline-block;
    background: #1a73e8;
    color: white;
    padding: 10px 14px;
    border-radius: 8px;
    text-decoration: none;
    font-size: 14px;
    text-align: center;
    transition: background 0.2s ease;
}

.book-card a:hover {
    background: #0d56c1;
}

    </style>
</head>
<body>

    <div class="recommend-container">
        <h2>ðŸ“š Get a Book Recommendation</h2>
        <input type="text" id="authorInput" placeholder="Enter preferred author (optional)">
        <input type="number" id="priceInput" placeholder="Enter your max price (e.g. 30)">
        <select id="categorySelect">
            <option value="fiction">Fiction</option>
            <option value="non-fiction">Non-Fiction</option>
            <option value="mystery">Mystery</option>
            <option value="science-fiction">Science Fiction</option>
            <option value="romance">Romance</option>
            <option value="biography">Biography</option>
            <option value="historical-fiction">Historical Fiction</option>
            <option value="thriller">Thriller</option>
            <option value="fantasy">Fantasy</option>
            <option value="horror">Horror</option>
            <option value="young-adult">Young Adult (YA)</option>
            <option value="children">Children's Books</option>
            <option value="self-help">Self-Help</option>
            <option value="poetry">Poetry</option>
            <option value="cookbooks">Cookbooks</option>
            <option value="art-design">Art & Design</option>
            <option value="philosophy">Philosophy</option>
            <option value="science">Science</option>
            <option value="health-wellness">Health & Wellness</option>
            <option value="politics">Politics</option>
            <option value="Magazine">Magazine</option>
            <option value="ebook">ebook</option>
        </select>
        <button onclick="getRecommendation()">Suggest a Book</button>
        <div class="result" id="recommendationResult"></div>
    </div>

<script>
function getRecommendation() {
    const author = document.getElementById("authorInput").value;
    const maxPrice = document.getElementById("priceInput").value || 10000;
    const category = document.getElementById("categorySelect").value;

    const params = new URLSearchParams({ author, maxPrice, category });

    const resultDiv = document.getElementById("recommendationResult");
    resultDiv.innerHTML = "<p>Loading recommendations...</p>";

    fetch(`/api/products/recommendation?${params}`)
        .then(res => res.json())
        .then(data => {
            resultDiv.innerHTML = "";

            if (Array.isArray(data) && data.length > 0) {
                data.forEach(book => {
                    const card = document.createElement("div");
                    card.className = "book-card";

                    card.innerHTML = `
                        <img src="${book.image || 'default-cover.jpg'}" alt="${book.title}">
                        <div class="book-card-content">
                            <div class="book-title">${book.title}</div>
                            <div class="book-author">by ${book.author}</div>
                            <div class="book-category">${book.category}</div>
                            <div class="book-price">$${book.price}</div>
                            <a href="book1.html?id=${book.id}">View Details</a>
                        </div>
                    `;

                    resultDiv.appendChild(card);
                });
            } else {
                resultDiv.innerHTML = "<p>No book matched your preferences.</p>";
            }
        })
        .catch(err => {
            resultDiv.innerHTML = "<p>Error fetching recommendation.</p>";
            console.error(err);
        });
}
</script>




</body>
</html>
